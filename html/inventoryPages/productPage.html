<!DOCTYPE html>
<html>

<head>
    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Il resto dello head -->
    <script> $('head').load('../templates/gridHead.html') </script>
    
</head>

<body>
    <div>
        <h1>Stai vedendo la pagina di <span id="productname"></span></h1>
        <h4><span id="productcategory"></span><span id="productsubcategory"></span></h4>
    </div>

    <img id="image"></img>

    <div id="description" class="card">
    </div>
    <div>
        <p>Le unit associate sono:</p>
        <div id="productunit">
        </div>
    </div>
    <p>I prodotti alternativi sono</p>
    <div id="altproduct">
    </div>
    <div>
    </div>
</body>
<footer>
    <script>
        const idProduct = localStorage.getItem("idProduct");
        const urlProduct = `https://site202120.tw.cs.unibo.it/api/products/${idProduct}`;


        async function Funzion() {
            let product = await $.get(urlProduct);

            $("#productname").append(`${product.name}`);
            $('#productcategory').append(`${product.category}`);
            $('#productsubcategory').append(`${product.subcategory}`);


            $('#image').attr('scr', `https://site202120.tw.cs.unibo.it${product.image}`);

            $('#description').append(`${product.description}`);

            product.altproducts.forEach(element => {
                $.get(`https://site202120.tw.cs.unibo.it/api/products/${element}`, function (data) {
                    $('#altproduct').append(`${data.name} <br>`);
                })
            });
        }

        $(document).ready(async function () {
            await Funzion()
        })
    </script>
</footer>

</html>